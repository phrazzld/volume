#!/usr/bin/env sh

# Get the previous and new HEAD commits
# $1 = previous HEAD
# $2 = new HEAD
# $3 = flag (1 = branch checkout, 0 = file checkout)

# Only run for branch checkouts
if [ "$3" = "1" ]; then
  # Check if convex/ directory changed between commits
  if git diff --name-only "$1" "$2" 2>/dev/null | grep -q "^convex/"; then
    echo ""
    echo "⚠️  Convex functions changed!"
    echo "   Run: pnpm dev:convex"
    echo "   (or just: pnpm dev)"
    echo "   to sync your deployment"
    echo ""
  fi
fi
